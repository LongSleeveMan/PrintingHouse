#:import hex kivy.utils.get_color_from_hex
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import utils kivy.utils
#:import Factory kivy.factory.Factory


#:set navy_blue hex('#07425e')
#:set orange hex('#ff9933')
#:set light_gray hex('#f2f2f2')
#:set gray hex('#f2f2f2')
#:set dark_gray hex('#c2c2c2')
#:set white hex('#ffffff')
#:set black hex('#000000')
#:set overall_bcolor hex('#07425e')


<Label>
    background_normal: ''
    color: black
    text_size: self.size
    halign: 'center'
    valign: 'middle'
    bcolor: white
    canvas.before:
        Color:
            rgba: (0, 0, 0, 1)  if self.bcolor is None else self.bcolor
        Rectangle:
            pos: self.pos
            size: self.size

<BoxLayout>
    bcolor: white
    canvas.before:
        Color:
            rgba: (0, 0, 0, 1)  if self.bcolor is None else self.bcolor
        Rectangle:
            pos: self.pos
            size: self.size

<Img>
    Image:
        id: img


<Main>:
    orientation : 'vertical'
    spacing: 1
    big_font: 30
    bcolor: black
    canvas.before:
        Color:
            rgba: (0, 0, 0, 1)  if self.bcolor is None else self.bcolor
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        spacing: 1
        size_hint_y: None
        height: 100
        bcolor: black
        canvas.before:
            Color:
                rgba: (0, 0, 0, 1)  if self.bcolor is None else self.bcolor
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text: 'Procesy'
            font_size: root.big_font

        BoxLayout:
            orientation: 'vertical'
            spacing: 1
            size_hint_x: None
            width: 240
            Label:
                text: 'Koperta'

            BoxLayout:
                Label:
                    text: 'Nakład:'
                TextInput:
                    size_hint: None, None
                    size: 120, 20
                    hint_text: 'xxxxx'
        Label:
            text: 'Projekt'
            font_size: root.big_font

    BoxLayout:
        size_hint_y: None
        height: 300
        spacing: 1
        bcolor: black
        canvas.before:
            Color:
                rgba: (0, 0, 0, 1)  if self.bcolor is None else self.bcolor
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            orientation: 'vertical'
            spacing: 1
            Label:
                text: 'Cięcie'

    
            RelativeLayout:
                id: r1
                size_hint: .7, None
                height: 50

                AsyncImage:
                    id: proces1
                    size_hint_x: None
                    width: 50
                    pos_hint_x: 0
                    source: 'img/proces.png'

                Label:
                    text: 'Proces1'
                    pos_hint: {'x': (r1.width - proces1.width)/root.width/2, 'top':1}
                    height: r1.height/2
                    size_hint: None, None

                Label:
                    text: 'kolor'
                    height: r1.height/2
                    pos_hint: {'x': (r1.width - proces1.width)/root.width/2, 'y':0}
                    size_hint: None, None
     
            RelativeLayout:
                size_hint: .7, None
                height: 50
                AsyncImage:
                    size_hint_x: None
                    width: 50
                    pos_hint_x: 0
                    source: 'img/proces.png'
                Label:
                    text: 'Proces1'
                    pos_hint: {'x': (r1.width - proces1.width)/root.width/2, 'top':1}
                    height: r1.height/2
                    size_hint: None, None
                Label:
                    text: 'kolor'
                    height: r1.height/2
                    pos_hint: {'x': (r1.width - proces1.width)/root.width/2, 'y':0}
                    size_hint: None, None

            RelativeLayout:
                id: r1
                size_hint: .7, None
                height: 50
                AsyncImage:
                    size_hint_x: None
                    width: 50
                    pos_hint_x: 0
                    source: 'img/proces.png'
                Label:
                    text: 'Proces1'
                    pos_hint: {'x': (r1.width - proces1.width)/root.width/2, 'top':1}
                    height: r1.height/2
                    size_hint: None, None
                Label:
                    text: 'kolor'
                    height: r1.height/2
                    pos_hint: {'x': (r1.width - proces1.width)/root.width/2, 'y':0}
                    size_hint: None, None

        BoxLayout:
            id: rl
            BoxLayout:
                orientation: 'vertical'
                size_hint_x: None
                width: 120
                Label:
                    id: lbl
                    size_hint: None, None
                    size: 120, 20
                    text: 'Nazwa papieru:'
                    #pos_hint: {'x':0, 'top':1}

                TextInput:
                    id: paper_name
                    size_hint: None, None
                    size: 120, 20
                    #pos_hint: {'x':0, 'top': 1 - lbl.height/rl.height}

                Label:
                    id: lbl
                    size_hint: None, None
                    size: 120, 20
                    text: 'Szerokosc:'
                    #pos_hint: {'x':0, 'top':1}

                TextInput:
                    id: width
                    text: '120'
                    size_hint: None, None
                    size: 120, 20
                    #pos_hint: {'x':0, 'top': 1 - lbl.height/rl.height}

                Label:
                    id: lbl
                    size_hint: None, None
                    size: 120, 20
                    text: 'Wysokosc:'
                    #pos_hint: {'x':0, 'top':1}

                TextInput:
                    id: height
                    text: '90'
                    size_hint: None, None
                    size: 120, 20
                    #pos_hint: {'x':0, 'top': 1 - lbl.height/rl.height}

                Label:
                    id: lbl
                    size_hint: None, None
                    size: 120, 20
                    text: 'Marginesy:'
                    #pos_hint: {'x':0, 'top':1}

                TextInput:
                    id: margins
                    text: '10'
                    size_hint: None, None
                    size: 120, 20
                    #pos_hint: {'x':0, 'top': 1 - lbl.height/rl.height}

                Label:
                    id: lbl
                    size_hint: None, None
                    size: 120, 20
                    text: 'Arkusz X:'
                    #pos_hint: {'x':0, 'top':1}

                TextInput:
                    id: sheet_x
                    text: '1000'
                    size_hint: None, None
                    size: 120, 20
                    #pos_hint: {'x':0, 'top': 1 - lbl.height/rl.height}

                Label:
                    id: lbl
                    size_hint: None, None
                    size: 120, 20
                    text: 'Arkusz Y:'
                    #pos_hint: {'x':0, 'top':1}

                TextInput:
                    id: sheet_y
                    text: '700'
                    size_hint: None, None
                    size: 120, 20
                    #pos_hint: {'x':0, 'top': 1 - lbl.height/rl.height}
                Button:
                    size_hint: None, None
                    size: 120, 20
                    text: 'Rozmieść'
                    on_press: root.calculate()
                BoxLayout:

            RelativeLayout:
                BoxLayout:

                    size_hint: .7, .7
                    pos_hint: {'center_x':.7, 'center_y':.5}
                Image:
                    id: project_view

    BoxLayout:
        RelativeLayout:
            id: layout
            spacing: 1
            Label:
                id: summary
                size_hint: None, None
                size: 160, 70
                pos_hint: {'x':0, 'y':.0}
                bcolor: gray
                canvas.before:
                    Color:
                        rgba: (0, 0, 0, 1)  if self.bcolor is None else self.bcolor
                    Rectangle:
                        pos: self.pos
                        size: self.size
            BoxLayout:
                id: project_space
                pos_hint: {'center_x': summary.width/root.width + .5, 'center_y': .5}
                size_hint: None, None
                bcolor: gray
                canvas.before:
                    Color:
                        rgba: (0, 0, 0, 1)  if self.bcolor is None else self.bcolor
                    Rectangle:
                        pos: self.pos
                        size: self.size